# –¢–µ–∫—É—â–∞—è —Ä–∞–±–æ—Ç–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –º–æ–¥—É–ª—è–º–∏ 1-2-3

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend      ‚îÇ    ‚îÇ   Backend       ‚îÇ    ‚îÇ   Mod1         ‚îÇ    ‚îÇ   Mod2         ‚îÇ
‚îÇ   (React/Vite)  ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (Express)     ‚îÇ    ‚îÇ   (8080)       ‚îÇ    ‚îÇ   (8000)       ‚îÇ
‚îÇ   Port: 3000    ‚îÇ    ‚îÇ   Port: 5001    ‚îÇ    ‚îÇ   ASR/NLP     ‚îÇ    ‚îÇ   NL–ü          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚îÇ                       ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚îÇ                       ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚îÇ                       ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚ñº                       ‚ñº                       ‚ñº                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   API Layer     ‚îÇ    ‚îÇ   Session DB    ‚îÇ    ‚îÇ   Mod3          ‚îÇ    ‚îÇ   File Storage  ‚îÇ
‚îÇ   (mod1/mod2/mod3)‚îÇ    ‚îÇ   PostgreSQL    ‚îÇ    ‚îÇ   (9000)       ‚îÇ    ‚îÇ   Local/Cloud   ‚îÇ
‚îÇ   –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π  ‚îÇ    ‚îÇ   MongoDB       ‚îÇ    ‚îÇ   Visual        ‚îÇ    ‚îÇ   –ê—É–¥–∏–æ/–¢–µ—Å—Ç    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ API

### 1. –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
**–§–∞–π–ª:** `src/api/config.ts`

**–§—É–Ω–∫—Ü–∏–∏:**
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ URL –º–æ–¥—É–ª–µ–π –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—ã
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `fetchJson()` —Å retry –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–µ—Å—Å–∏–π `SessionManager`
- –ê–¥–∞–ø—Ç–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö `DataAdapters` –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞—Ç–∞–º–∏

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ headers:**
```typescript
{
  'X-Client': 'interview-web',
  'X-Request-Id': uuid4(),
  'X-Session-Id': sessionId –∏–∑ localStorage,
  'Content-Type': 'application/json'
}
```

### 2. Mod1 –∫–ª–∏–µ–Ω—Ç (–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è)
**–§–∞–π–ª:** `src/api/mod1.ts`

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `transcribe(formData)` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –∞—É–¥–∏–æ —Ñ–∞–π–ª–∞ –Ω–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é
- `healthCheck()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞

**–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**
```
Browser ‚Üí File Input ‚Üí FormData ‚Üí Mod1Client.transcribe() ‚Üí 
POST /transcribe (multipart/form-data) ‚Üí Mod1 ‚Üí 
–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è ‚Üí JSON Response ‚Üí Frontend Store
```

**–û—Ç–≤–µ—Ç –æ—Ç Mod1:**
```json
{
  "status": "ok",
  "session_id": "uuid",
  "chunk_id": "chunk-123456789",
  "text": "–†–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç",
  "confidence": 0.95,
  "language": "ru-RU"
}
```

### 3. Mod2 –∫–ª–∏–µ–Ω—Ç (NLP –æ–±—Ä–∞–±–æ—Ç–∫–∞)
**–§–∞–π–ª:** `src/api/mod2.ts`

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `ingestChunk()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è NLP –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `getEntities()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- `getLayout()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ layout

**–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**
```
Text from Mod1 ‚Üí Mod2Client.ingestChunk() ‚Üí 
POST /v2/ingest/chunk ‚Üí Mod2 NLP Engine ‚Üí 
Entities Extraction ‚Üí Mod2Client.getEntities() ‚Üí 
GET /v2/session/{id}/entities ‚Üí JSON Response
```

**–üayload –∫ Mod2:**
```json
{
  "session_id": "uuid",
  "chunk_id": "chunk-123456789", 
  "seq": 1,
  "lang": "ru-RU",
  "text": "–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç"
}
```

**–û—Ç–≤–µ—Ç –æ—Ç Mod2:**
```json
{
  "status": "ok",
  "session_id": "uuid",
  "entities": ["–∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–æ—Ñ–∏—Å", "–∫–Ω–æ–ø–∫–∏", "–ø–æ–¥–≤–∞–ª"],
  "keyphrases": ["—Å–¥–µ–ª–∞—Ç—å —Å–∞–π—Ç", "—Å –∫–Ω–æ–ø–∫–∞–º–∏", "—Å –ø–æ–¥–≤–∞–ª–æ–º"],
  "chunks_processed": 1
}
```

### 4. Mod3 –∫–ª–∏–µ–Ω—Ç (Visual Mapping)
**–§–∞–π–ª:** `src/api/mod3.ts`

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `mapEntities()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –º–∞–ø–ø–∏–Ω–≥–∞
- `getLayout()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ layout —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- `getComponents()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (—Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)

**–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**
```
Entities from Mod2 ‚Üí Mod3Client.mapEntities() ‚Üí 
POST /v1/map ‚Üí Mod3 Visual Engine ‚Üí 
Component Matching ‚Üí JSON Layout Response ‚Üí 
Adapters.fromMod3() ‚Üí PageModel
```

**Payload –∫ Mod3:**
```json
{
  "session_id": "uuid",
  "entities": ["–∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–æ—Ñ–∏—Å", "–∫–Ω–æ–ø–∫–∏", "–ø–æ–¥–≤–∞–ª"],
  "keyphrases": ["—Å–¥–µ–ª–∞—Ç—å —Å–∞–π—Ç", "—Å –∫–Ω–æ–ø–∫–∞–º–∏"],
  "template": "hero-main-footer"
}
```

**–û—Ç–≤–µ—Ç –æ—Ç Mod3:**
```json
{
  "status": "ok",
  "session_id": "uuid",
  "layout": {
    "template": "hero-main-footer",
    "sections": {
      "hero": [{
        "component": "ui.hero",
        "props": {...},
        "layout": {"colStart": 1, "colSpan": 12, "row": 1}
      }],
      "main": [{
        "component": "ui.button", 
        "props": {"text": "–ö–Ω–æ–ø–∫–∞"},
        "layout": {"colStart": 1, "colSpan": 4, "row": 2}
      }],
      "footer": [...]
    },
    "count": 3
  },
  "matches": [
    {"term": "–∫–Ω–æ–ø–∫–∏", "component": "ui.button", "confidence": 0.85},
    {"term": "–ø–æ–¥–≤–∞–ª", "component": "ui.footer", "confidence": 0.9}
  ]
}
```

### 5. Web Backend –∫–ª–∏–µ–Ω—Ç (–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä)
**–§–∞–π–ª:** `src/api/web.ts`

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `saveLayout()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ layout –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –±—ç–∫–µ–Ω–¥–∞
- `loadLayout()` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ layout –∏–∑ –±–∞–∑—ã
- `getWebComponents()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**
```
PageModel ‚Üí WebClient.saveLayout() ‚Üí 
POST /web/v1/session/{id}/layout ‚Üí 
Backend Database ‚Üí Session Storage ‚Üí 
Success Response ‚Üí Auto-reload UI
```

## üîÑ End-to-End —Ñ–ª–æ—É—ã

### 1. –ì–æ–ª–æ—Å–æ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ (Voice-to-Layout)
**–§–∞–π–ª:** `src/flows/voiceToLayout.ts`

**–§—É–Ω–∫—Ü–∏—è:** `convertVoiceToLayout(audioFile, options)`

**–ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å:**

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∞—É–¥–∏–æ** (5% –ø—Ä–æ–≥—Ä–µ—Å—Å–∞)
   ```typescript
   const formData = new FormData();
   formData.append('audio', audioFile);
   formData.append('session_id', sessionId);
   formData.append('chunk_id', `chunk-${Date.now()}`);
   ```

2. **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è** (30% –ø—Ä–æ–≥—Ä–µ—Å—Å–∞)
   ```typescript
   const mod1Result = await mod1Client.transcribe(formData);
   // –†–µ–∑—É–ª—å—Ç–∞—Ç: {text: "...", chunk_id: "...", language: "ru-RU"}
   ```

3. **NLP –æ–±—Ä–∞–±–æ—Ç–∫–∞** (50% –ø—Ä–æ–≥—Ä–µ—Å—Å–∞)
   ```typescript
   await mod2Client.ingestChunk({
     session_id: sessionId,
     chunk_id: mod1Result.chunk_id,
     seq: 1,
     lang: mod1Result.language,
     text: mod1Result.text
   });
   ```

4. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π** (70% –ø—Ä–æ–≥—Ä–µ—Å—Å–∞)
   ```typescript
   const mod2Entities = await mod2Client.getEntities(sessionId);
   // –†–µ–∑—É–ª—å—Ç–∞—Ç: {entities: [...], keyphrases: [...]}
   ```

5. **–í–∏–∑—É–∞–ª—å–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥** (90% –ø—Ä–æ–≥—Ä–µ—Å—Å–∞)
   ```typescript
   const mod3Result = await mod3Client.mapEntities({
     session_id: sessionId,
     entities: mod2Entities.entities,
     keyphrases: mod2Entities.keyphrases,
     template: 'hero-main-footer'
   });
   ```

6. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ layout** (100% –ø—Ä–æ–≥—Ä–µ—Å—Å–∞)
   ```typescript
   const pageModel = DataAdapters.fromMod3(mod3Result);
   await webClient.saveLayout(sessionId, pageModel);
   ```

### 2. –¢–µ–∫—Å—Ç–æ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ (Text-to-Layout)
**–§–∞–π–ª:** `src/flows/voiceToLayout.ts`

**–§—É–Ω–∫—Ü–∏—è:** `convertTextToLayout(text, sessionId, template, autoSave)`

**–ü—Ä–æ—Ü–µ—Å—Å –±–µ–∑ —à–∞–≥–æ–≤ 1-2:**
```
Text Input ‚Üí Mod2 NLP ‚Üí Entities ‚Üí Mod3 Mapping ‚Üí Web Backend
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ Mod3
**–§–∞–π–ª:** `src/stores/usePageStore.ts`

**–§—É–Ω–∫—Ü–∏—è:** `refreshMod3Layout(sessionId)`

```
Session ID ‚Üí Mod3Client.getLayout() ‚Üí GET /v1/layout/{id} ‚Üí 
Fresh Layout ‚Üí Update Store ‚Üí Auto-render UI
```

## üè™ State Management (Zustand Store)

### –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å—Ç–æ—Ä
**–§–∞–π–ª:** `src/stores/usePageStore.ts`

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:**
```typescript
interface PageStoreState {
  // –°–µ—Å—Å–∏—è
  sessionId: string;
  
  // –î–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  pageModel: PageModel | null;
  
  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  isGenerating: boolean;
  generationProgress: number;
  generationStep: string;
  generationResult: VoiceToLayoutResult | null;
  
  // –û—à–∏–±–∫–∏
  error: string | null;
}
```

**–î–µ–π—Å—Ç–≤–∏—è:**
```typescript
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
generateFromVoice(audioFile, options)
generateFromText(text, sessionId)

// –†–∞–±–æ—Ç–∞ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏  
loadExisting(sessionId)
refreshMod3Layout(sessionId)

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
saveDebounced() // –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 500ms
saveLayout()
```

## üé® UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –ö–Ω–æ–ø–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å API
**–§–∞–π–ª:** `src/components/ApiIntegrationButtons.tsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- "–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑ —Ç–µ–∫—Å—Ç–∞" ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤–≤–æ–¥–∞
- "–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑ –∞—É–¥–∏–æ" ‚Üí file input –¥–ª—è –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤
- "–û–±–Ω–æ–≤–∏—Ç—å –∏–∑ Mod3" ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç layout –∏–∑ Mod3
- –ü–æ–∫–∞–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏:**
```typescript
// –£—Å–ø–µ—Ö
toast.showSuccess('Layout —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω!');

// –û—à–∏–±–∫–∞
toast.showError(result.error || '–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏');

// –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ  
toast.showWarning('–í—ã–±–µ—Ä–∏—Ç–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª');
```

### 2. –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
**–§–∞–π–ª:** `src/utils/toast.tsx`

**–¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
- `success` (–∑–µ–ª–µ–Ω—ã–π) - —É—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `error` (–∫—Ä–∞—Å–Ω—ã–π) - –æ—à–∏–±–∫–∏
- `warning` (–∂–µ–ª—Ç—ã–π) - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è  
- `info` (—Å–∏–Ω–∏–π) - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Context Provider –≤ main.tsx**

### 3. Page Engine –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
**–§–∞–π–ª—ã:** `src/page-engine/` –ø–∞–ø–∫–∞

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `PageRenderer.tsx` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü
- `types.ts` - —Ç–∏–ø–∏–∑–∞—Ü–∏—è Block, PageModel
- `components.ts` - registry –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–ø—É—Å—Ç–æ–π, —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤
**–í dev —Ä–µ–∂–∏–º–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:**
```typescript
console.log(`[API_LOG] ‚û°Ô∏è –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: POST ${url}`, {
  requestId: 'uuid',
  sessionId: 'session_uuid', 
  source: 'mod1',
  headers: {...},
  body: '[Multipart Data]'
});

console.log(`[API_LOG] ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç mod1`, {
  requestId: 'uuid',
  status: 200,
  data: {...}
})
```

### Retry –º–µ—Ö–∞–Ω–∏–∑–º
**–î–ª—è –æ—à–∏–±–æ–∫ 429/5xx –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è:**
```typescript
// –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
const delay = Math.pow(2, attempt) * 1000 + Math.random() * 1000;
await new Promise(res => setTimeout(res, delay));
```

### Timeout –∑–∞—â–∏—Ç–∞
```typescript
const controller = new AbortController();
const timeout = setTimeout(() => controller.abort(), 10000);
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å—Ç–∞—Ç—É—Å 503
- –¢–∞–π–º–∞—É—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å—Ç–∞—Ç—É—Å 408  
- –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø–æ–ª—É—á–∞—é—Ç retry
- –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –æ—à–∏–±–∫–∏ (4xx) –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è

## üö® –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
```bash
# –û—à–∏–±–∫–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ mod1.ts
Expected '>', got 'className'
# –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç React

# –ü—É—Å—Ç–æ–π registry –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤  
ComponentRegistry –ø—É—Å—Ç - –Ω—É–∂–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ UI
- `ApiIntegrationButtons` —Å–æ–∑–¥–∞–Ω, –Ω–æ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ä–∞–±–æ—á–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –ù—É–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `UnifiedSessionPage.tsx`

### 3. –ù–µ–ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è page engine
- `ComponentRegistry` –Ω—É–∂–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –ù—É–∂–Ω—ã –∞–¥–∞–ø—Ç–µ—Ä—ã –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å

### –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —á–∞—Å—Ç–∏:
1. **Mod1 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∞—É–¥–∏–æ ‚úÖ
2. **Mod2 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - NLP –æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚úÖ  
3. **Mod3 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –≤–∏–∑—É–∞–ª—å–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ ‚úÖ
4. **Web Backend** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ layout ‚úÖ
5. **Session Management** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ ‚úÖ
6. **Error Handling** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å retry ‚úÖ
7. **Toast Notifications** - —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π ‚úÖ
8. **Logging** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ API –≤—ã–∑–æ–≤–æ–≤ ‚úÖ

### –ß–∞—Å—Ç–∏—á–Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:
1. **End-to-end flows** - —Ä–∞–±–æ—Ç–∞—é—Ç, –Ω–æ –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ UI
2. **State Management** - —Å—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ –≤—Å–µ —ç–∫—à–µ–Ω—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã
3. **Page Engine** - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –µ—Å—Ç—å, –Ω—É–∂–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:
1. **UI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
2. **Registry –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** - –Ω—É–∂–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
3. **–†–æ—É—Ç–∏–Ω–≥** - –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**
2. **–°–æ–∑–¥–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π ComponentRegistry —Å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏**  
3. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å ApiIntegrationButtons –≤ UnifiedSessionPage**
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ñ–ª–æ—É Voice ‚Üí Layout**

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —Ä–∞–±–æ—Ç—ã –º–æ–¥—É–ª–µ–π

–ü–æ –ø–æ—Å–ª–µ–¥–Ω–∏–º —Ç–µ—Å—Ç–∞–º:
- **Mod1 —Ç–æ—á–Ω–æ—Å—Ç—å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏:** 95%+ (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç)
- **Mod2 –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π:** 7 —Å—É—â–Ω–æ—Å—Ç–µ–π –∏–∑ –æ–±—Ä–∞–∑—Ü–∞
- **Mod3 –∫–∞—á–µ—Å—Ç–≤–æ –º–∞–ø–ø–∏–Ω–≥–∞:** 75% —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è–º
- **–°–∫–æ—Ä–æ—Å—Ç—å end-to-end:** ~5-10 —Å–µ–∫—É–Ω–¥ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É

---

*–î–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª–µ–Ω: {{ current_date }}*

