# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ API –º–æ–¥—É–ª–µ–π

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å Mod1, Mod2 –∏ Mod3 —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π —Å–ª–æ–π API-–∫–ª–∏–µ–Ω—Ç–æ–≤.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    API Calls    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Web Frontend   ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ   API Layer     ‚îÇ
‚îÇ                 ‚îÇ                 ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                              ‚îÇ
                                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Mod1_v2   ‚îÇ   Mod2-v1   ‚îÇ   Mod3-v1   ‚îÇ   Web       ‚îÇ
‚îÇ   (ASR)     ‚îÇ   (NLP)     ‚îÇ(Visual Map) ‚îÇ (Backend)   ‚îÇ
‚îÇ   :8080     ‚îÇ   :8001     ‚îÇ   :9001     ‚îÇ   :5001     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API –∫–ª–∏–µ–Ω—Ç–æ–≤

```
src/api/
‚îú‚îÄ‚îÄ config.ts          # –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ fetchJson
‚îú‚îÄ‚îÄ mod1.ts           # –ö–ª–∏–µ–Ω—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –∞—É–¥–∏–æ
‚îú‚îÄ‚îÄ mod2.ts           # –ö–ª–∏–µ–Ω—Ç NLP –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ mod3.ts           # –ö–ª–∏–µ–Ω—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –º–∞–ø–ø–∏–Ω–≥–∞
‚îî‚îÄ‚îÄ web.ts            # –ö–ª–∏–µ–Ω—Ç –±—ç–∫–µ–Ω–¥–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

src/flows/
‚îî‚îÄ‚îÄ voiceToLayout.ts   # End-to-end –ø–æ—Ç–æ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

src/components/
‚îî‚îÄ‚îÄ ApiIntegrationButtons.tsx  # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã (.env.local)

```bash
# –ë–∞–∑–æ–≤—ã–µ URL –º–æ–¥—É–ª–µ–π
VITE_MOD1_BASE_URL=http://localhost:8080
VITE_MOD2_BASE_URL=http://localhost:8001  
VITE_MOD3_BASE_URL=http://localhost:9001
VITE_API_BASE_URL=http://localhost:5001

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
VITE_MOD1_API_KEY=
VITE_MOD2_API_KEY=
VITE_MOD3_API_KEY=

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
VITE_DEFAULT_LANGUAGE=ru-RU
VITE_AUDIO_CHUNK_SIZE=1000
VITE_MAX_COMPONENTS_PER_SECTION=5
VITE_FUZZY_THRESHOLD=0.8
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install uuid
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ

```tsx
import { usePageStore } from '../stores/usePageStore';
import { ApiIntegrationButtons } from '../components/ApiIntegrationButtons';

function SessionPage({ sessionId }: { sessionId: string }) {
  const {
    generateFromVoice,
    generateFromText,
    isGenerating,
    generationProgress,
    generationStep
  } = usePageStore();

  return (
    <div>
      {/* –í–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π UI */}
      <PageRenderer />
      
      {/* –ù–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ API */}
      <ApiIntegrationButtons 
        sessionId={sessionId}
        onLayoutGenerated={(count) => console.log(`–°–æ–∑–¥–∞–Ω–æ ${count} –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤`)}
      />
      
      {/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ */}
      {isGenerating && (
        <div className="progress-bar">
          {generationStep}: {generationProgress}%
        </div>
      )}
    </div>
  );
}
```

## üìã –ü—Ä–∏–º–µ—Ä—ã curl –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –º–æ–¥—É–ª–µ–π

```bash
# Mod1_v2 (ASR)
curl -X GET "http://localhost:8080/healthz"

# Mod2-v1 (NLP)
curl -X GET "http://localhost:8001/healthz"

# Mod3-v1 (Visual Mapping)  
curl -X GET "http://localhost:9001/healthz"

# Web Backend (Or-chestrator)
curl -X GET "http://localhost:5001/health"
```

### –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ layout

#### 1Ô∏è‚É£ –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∞—É–¥–∏–æ (Mod1)

```bash
# –°–æ–∑–¥–∞—Ç—å dummy –∞—É–¥–∏–æ —Ñ–∞–π–ª –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
ffmpeg -f lavfi -i "sine=frequency=440:duration=1" -acodec libopus test_audio.wav

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∞—É–¥–∏–æ –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
curl -X POST "http://localhost:8080/v1/transcribe?session_id=test_$(date +%s)&lang=ru-RU&timestamp=$(date +%s%3N)" \
  -F "file=@test_audio.wav" \
  -H "X-Client: interview-web" \
  -H "X-Request-Id: req_$(date +%s)"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "session_id": "test_1642123456789",
  "chunk_id or text": "–°–¥–µ–ª–∞–π —Å–∞–π—Ç —Å –∫–Ω–æ–ø–∫–æ–π –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º...",
  "confidence": 0.95,
  "language": "ru"
}
```

#### 2Ô∏è‚É£ NLP –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ (Mod2)

```bash
# –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
curl -X POST "http://localhost:8001/v2/ingest/full" \
  -H "Content-Type: application/json" \
  -H "X-Client: interview-web" \
  -H "X-Session-Id: test_1642123456789" \
  -d '{
    "session_id": "test_1642123456789",
    "lang": "ru-RU",
    "text_full": "–°–¥–µ–ª–∞–π —Å–∞–π—Ç —Å –∫–Ω–æ–ø–∫–æ–π –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤ —à–∞–ø–∫–µ, —Ç–µ–∫—Å—Ç–æ–º –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —á–∞—Å—Ç–∏"
  }'

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö entities
curl -X GET "http://localhost:8001/v2/session/test_1642123456789/entities" \
  -H "X-Client: interview-web" \
  -H "X-Session-Id: test_1642123456789"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç entities:**
```json
{
  "status": "ok",
  "session_id": "test_1642123456789",
  "entities": ["—Å–∞–π—Ç", "–∫–Ω–æ–ø–∫–∞", "–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ", "—à–∞–ø–∫–∞", "—Ç–µ–∫—Å—Ç"],
  "keyphrases": ["—Å–∞–π—Ç —Å –∫–Ω–æ–ø–∫–æ–π", "–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —à–∞–ø–∫–µ", "—Ç–µ–∫—Å—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —á–∞—Å—Ç–∏"],
  "chunks_processed": 1
}
```

#### 3Ô∏è‚É£ –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (Mod3)

```bash
# –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ entities —Å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
curl -X POST "http://localhost:9001/v1/map" \
  -H "Content-Type: application/json" \
  -H "X-Client: interview-web" \
  -H "X-Session-Id: test_1642123456789" \
  -d '{
    "session_id": "test_1642123456789",
    "entities": ["—Å–∞–π—Ç", "–∫–Ω–æ–ø–∫–∞", "–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ", "—à–∞–ø–∫–∞", "—Ç–µ–∫—Å—Ç"],
    "keyphrases": ["—Å–∞–π—Ç —Å –∫–Ω–æ–ø–∫–æ–π", "–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —à–∞–ø–∫–µ", "—Ç–µ–∫—Å—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —á–∞—Å—Ç–∏"],
    "template": "hero-main-footer"
  }'

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ layout
curl -X GET "http://localhost:9001/v1/layout/test_1642123456789" \
  -H "X-Client: interview-web" \
  -H "X-Session-Id: test_1642123456789"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç –æ—Ç Mod3:**
```json
{
  "status": "ok",
  "session_id": "test_1642123456789",
  "layout": {
    "template": "hero-main-footer",
    "sections": {
      "hero": [
        {
          "component": "ui.hero",
          "props": {
            "title": "Welcome to Our Platform",
            "backgroundImage": "/images/hero-bg.jpg"
          },
          "confidence": 0.9,
          "match_type": "exact"
        }
      ],
      "main": [
        {
          "component": "ui.button",
          "props": {
            "text": "–ù–∞–∂–º–∏ –º–µ–Ω—è",
            "variant": "primary"
          },
          "confidence": 1.0,
          "match_type": "exact"
        },
        {
          "component": "ui.text",
          "props": {
            "text": "–û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞"
          },
          "confidence": 1.0,
          "match_type": "exact"
        }
      ],
      "footer": []
    },
    "count": 3
  },
  "matches": [
    {
      "term": "–∫–Ω–æ–ø–∫–∞",
      "component": "ui.button",
      "confidence": 1.0,
      "match_type": "exact"
    },
    {
      "term": "—Ç–µ–∫—Å—Ç", 
      "component": "ui.text",
      "confidence": 1.0,
      "match_type": "exact"
    }
  ]
}
```

#### 4Ô∏è‚É£ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±—ç–∫–µ–Ω–¥–µ (Web)

```bash
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ layout –≤ –±—ç–∫–µ–Ω–¥–µ
curl -X POST "http://localhost:5001/web/v1/session/test_1642123456789/layout" \
  -H "Content-Type: application/json" \
  -H "X-Client: interview-web" \
  -H "X-Session-Id: test_1642123456789" \
  -d '{
    "layout": {
      "template": "hero-main-footer",
      "sections": {
        "hero": [{"component": "ui.hero", "props": {...}}],
        "main": [{"component": "ui.button", "props": {...}}, {"component": "ui.text", "props": {...}}],
        "footer": []
      },
      "metadata": {
        "sessionId": "test_1642123456789",
        "source": "mod3",
        "createdAt": "2024-01-15T10:30:00Z"
      }
    }
  }'

# –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ layout
curl -X GET "http://localhost:5001/web/v1/session/test_1642123456789/layout" \
  -H "X-Client: interview-web" \
  -H "X-Session-Id: test_1642123456789"
```

## üß© –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API –∫–ª–∏–µ–Ω—Ç–æ–≤

### –ú–æ–¥—É–ª—å Mod1 (–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è)

```tsx
import { mod1Client } from '../api/mod1';

// –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∞—É–¥–∏–æ —Ñ–∞–π–ª–∞
const result = await mod1Client.transcribe({
  file: audioFile,
  sessionId: 'my_session_123',
  chunkId: 'chunk_001'
});

console.log('–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è:', result.text);
```

### –ú–æ–¥—É–ª—å Mod2 (NLP)

```tsx
import { mod2Client } from '../api/mod2';

// –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞
await mod2Client.ingestFullText({
  session_id: 'my_session_123',
  lang: 'ru-RU',
  text_full: '–°–æ–∑–¥–∞–π –∫—Ä–∞—Å–∏–≤—ã–π —Å–∞–π—Ç —Å –∫–Ω–æ–ø–∫–∞–º–∏'
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ entities
const entities = await mod2Client.getEntities('my_session_123');
console.log('Entities:', entities.entities);
```

### –ú–æ–¥—É–ª—å Mod3 (–í–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ)

```tsx
import { mod3Client } from '../api/mod3';

// –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–æ–≤ —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
const layout = await mod3Client.mapEntities({
  session_id: 'my_session_123',
  entities: ['–∫–Ω–æ–ø–∫–∞', '–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ', '—Ç–µ–∫—Å—Ç'],
  keyphrases: ['–∫–Ω–æ–ø–∫–∞ –¥–µ–π—Å—Ç–≤–∏–µ', '–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞'],
  template: 'hero-main-footer'
});

console.log('–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:', layout.layout.count);
```

### Web Backend (–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä)

```tsx
import { webClient } from '../api/web';

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ layout
const saved = await webClient.saveLayout('my_session_123', {
  template: 'hero-main-footer',
  sections: {
    hero: [...],
    main: [...],
    footer: [...]
  }
});

// –ó–∞–≥—Ä—É–∑–∫–∞ layout
const loaded = await webClient.loadLayout('my_session_123');
```

## üîÑ End-to-End –ø–æ—Ç–æ–∫

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–º

```tsx
import { convertVoiceToLayout } from '../flows/voiceToLayout';

const result = await convertVoiceToLayout(audioFile, {
  sessionId: 'my_session_123',
  autoSave: true,
  template: 'hero-main-footer'
});

if (result.success) {
  console.log('Layout —Å–æ–∑–¥–∞–Ω:', result.finalLayout);
  console.log('–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:', result.finalLayout.metadata.count);
} else {
  console.error('–û—à–∏–±–∫–∞:', result.error);
}
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ —Ç–µ–∫—Å—Ç–∞

```tsx
import { convertTextToLayout } from '../flows/voiceToLayout';

const result = await convertTextToLayout(
  '–°–æ–∑–¥–∞–π —Å–∞–π—Ç —Å –±–æ–ª—å—à–∏–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏ –∏ –∫—Ä–∞—Å–∏–≤—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏',
  'my_session_123'
);
```

## üõ†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```tsx
import { useToast, toastHelpers } from '../utils/toast';

function MyComponent() {
  const { addToast } = useToast();
  
  const handleError = (error: Error) => {
    if (error.message.includes('Mod3')) {
      addToast(toastHelpers.mod3MappingFailed(() => {
        // –î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ Mod3
        mod3Client.clearCache();
        retryGeneration();
      }));
    } else if (error.message.includes('network')) {
      addToast(toastHelpers.networkError('Mod1', retry));
    } else {
      addToast({
        type: 'error',
        title: '–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏',
        message: error.message
      });
    }
  };
}
```

### Retry –º–µ—Ö–∞–Ω–∏–∑–º—ã

API –∫–ª–∏–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç retry –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫ –∏ 5xx —Å—Ç–∞—Ç—É—Å–æ–≤:

```tsx
// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è retry –≤ config.ts
const response = await fetchJson(url, {
  method: 'POST',
  retries: 3,        // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
  timeout: 10000     // –¢–∞–π–º–∞—É—Ç –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
});
```

## üîç –û—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### Dev –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (`NODE_ENV=development`) –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:

```typescript
üîÑ API Request [mod1]
URL: POST http://localhost:8080/v1/transcribe?session_id=test_123
Request ID: req_1642123456789_abc123
Session ID: test_123
Status: 200 OK
Response data: { status: "ok", text: "..." }

‚úÖ –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —É—Å–ø–µ—à–Ω–∞:
source: mod1
text: –°–¥–µ–ª–∞–π —Å–∞–π—Ç...
sessionId: test_123
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π
curl -s http://localhost:8080/healthz | jq '.status'  # Mod1
curl -s http://localhost:8001/healthz | jq '.status'  # Mod2  
curl -s http://localhost:9001/healthz | jq '.status'  # Mod3
curl -s http://localhost:5001/health | jq '.status'   # Backend

# –ü—Ä–æ–≤–µ—Ä–∫–∞ endpoint'–æ–≤
curl -s http://localhost:8001/v2/session/test_123/entities | jq '.entities'
curl -s http://localhost:9001/v1/components | jq '.components[0:3]'
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ú–µ—Ç—Ä–∏–∫–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏:

- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ retry –ø–æ–ø—ã—Ç–æ–∫
- –†–∞–∑–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤
- –û—à–∏–±–∫–∏ –ø–æ —Ç–∏–ø–∞–º

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** - Mod3 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 60 —Å–µ–∫—É–Ω–¥
2. **Debounced —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - Layout –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ 500ms –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π  
3. **–ö–æ–º–ø—Ä–µ—Å—Å–∏—è** - –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
4. **Parallel –∑–∞–ø—Ä–æ—Å—ã** - –ì–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞—é—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏:

```
X-Client: interview-web
X-Request-Id: req_1642123456789_abc123def456
X-Session-Id: session_1642123456789_user123
User-Agent: InterviewWebApp/1.0.0
Content-Type: application/json
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Å—Å–∏–π

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è session_id —á–µ—Ä–µ–∑ UUID
- Persistence —Å–µ—Å—Å–∏–π –≤ localStorage
- –°–∫–≤–æ–∑–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ session_id —á–µ—Ä–µ–∑ –≤—Å–µ –º–æ–¥—É–ª–∏

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ DevTools –∫–æ–Ω—Å–æ–ª–∏
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ curl –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –º–æ–¥—É–ª–µ–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã (.env.local)
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–ø—É—â–µ–Ω—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø–æ—Ä—Ç–∞—Ö

**–°—á–∞—Å—Ç–ª–∏–≤–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏! üöÄ**

